!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),o.Oscilloscope=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var e=arguments,o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),!o)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var t=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(s=t))}),e.splice(s,0,r),e}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{null==e?storage.removeItem("debug"):storage.debug=e}catch(o){}}function load(){var e;try{e=storage.debug}catch(o){}return e}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors;var storage;storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:window.localStorage,exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(e){return JSON.stringify(e)},exports.enable(load());
},{"./debug":2}],2:[function(require,module,exports){
function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(e){function r(){}function o(){var e=o,r=+new Date,s=r-(prevTime||r);e.diff=s,e.prev=prevTime,e.curr=r,prevTime=r,null==e.useColors&&(e.useColors=exports.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=exports.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var n=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;n++;var s=exports.formatters[o];if("function"==typeof s){var p=t[n];r=s.call(e,p),t.splice(n,1),n--}return r}),"function"==typeof exports.formatArgs&&(t=exports.formatArgs.apply(e,t));var p=o.log||exports.log||console.log.bind(console);p.apply(e,t)}r.enabled=!1,o.enabled=!0;var s=exports.enabled(e)?o:r;return s.namespace=e,s}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,s=0;o>s;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,o;for(r=0,o=exports.skips.length;o>r;r++)if(exports.skips[r].test(e))return!1;for(r=0,o=exports.names.length;o>r;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevColor=0,prevTime;
},{"ms":3}],3:[function(require,module,exports){
function parse(e){var r=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"h":return a*h;case"minutes":case"minute":case"m":return a*m;case"seconds":case"second":case"s":return a*s;case"ms":return a}}}function short(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function long(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){return e>s?void 0:1.5*e>s?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){return e=e||{},"string"==typeof s?parse(s):e["long"]?long(s):short(s)};
},{}],4:[function(require,module,exports){
var Oscilloscope,debug,__bind=function(t,i){return function(){return t.apply(i,arguments)}};debug=require("debug")("oscilloscope"),Oscilloscope=function(){function t(i,n){return this.canvas=i,this.options=null!=n?n:{},this._drawSignal=__bind(this._drawSignal,this),this instanceof t?(this.signals=[],this.drawRequest=0,this.timeDomain=new Uint8Array(options.buffer||2048),this.drawContext=this.canvas.getContext("2d"),this.drawContext.lineWidth=options.stroke||2,this.drawContext.shadowBlur=options.glow&&100*options.glow||0,this.drawContext.translate(0,this.canvas.height),void this.drawContext.scale(1,-1)):new t(this.canvas,options)}return t.prototype.addSignal=function(t,i){var n;if(!(t instanceof AudioNode))throw new Error("Signal must be an AudioNode");return t instanceof AnalyserNode?(debug("add signal analyser"),n=t):(debug("add signal source"),n=t.context.createAnalyser(),t.connect(n)),n.fftSize=this.timeDomain.length,this.signals.push({analyser:n,color:i||"#ffffff"}),this.options.autostart!==!1&&1===this.signals.length?this.start():void 0},t.prototype.removeSignal=function(){throw debug("remove signal"),new Error("Not implemented.")},t.prototype.start=function(){return this.drawRequest?void 0:(debug("start animation"),this.drawRequest=window.requestAnimationFrame(this._drawSignal))},t.prototype.stop=function(){return debug("stop animation"),cancelAnimationFrame(this.drawRequest),this.drawRequest=0,this.drawContext.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype._drawSignal=function(){var t,i,n,e,s,a,o,r,h,d,l,c,u,g,w;for(this.drawContext.clearRect(0,0,this.canvas.width,this.canvas.height),a=this.canvas.width/this.timeDomain.length,e=this.canvas.height/this.signals.length,g=this.signals,i=d=0,c=g.length;c>d;i=++d){for(s=g[i],this.drawContext.beginPath(),s.analyser.getByteTimeDomainData(this.timeDomain),w=this.timeDomain,t=l=0,u=w.length;u>l;t=l+=2)o=w[t],n=o/255,r=t*a,h=e*n+e*i,this.drawContext.lineTo(r,h);this.drawContext.strokeStyle=s.color,this.drawContext.shadowColor=s.color,this.drawContext.stroke()}return this.drawRequest=window.requestAnimationFrame(this._drawSignal)},t}(),module.exports=Oscilloscope;
},{"debug":1}]},{},[4])(4)
});